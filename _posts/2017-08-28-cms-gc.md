---
layout: post
title:  "CMS垃圾收集"
date:   2017-08-28 14:08:33 +0800
categories: GC
---


* JDK1.5时推出，老年代收集器，第一款真正意义上的并发收集器，默认新生代的收集器是ParNew收集器
* 基于标记-清除算法，在并发清除阶段会产生浮动垃圾
* 适合用户交互的程序，互联网，B/S架构的服务端

## 步骤
1. 初始标记 标记一下GC Roots能直接关联到的对象，速度非常快，需要Stop the world
1. 并发标记 GC Roots Tracing 并发执行
1. 重新标记 修正并发标记期间用户程序继续运转而导致标记产生变化的一部分对象的标记记录，停顿时间比初始标记长，但是远比并发标记短，需要Stop the world
1. 并发清除 

## 缺点
* 对CPU资源非常敏感，占用一部分线程，吞吐量降低，默认启动的回收线程数(CPU数量+3)/4
* 基于标记-清除算法实现，会产生大量的空间碎片，会给大对象分配带来问题
* 无法处理并发清除阶段产生的浮动垃圾（Floating Garbage）
* 可能出现“Concurrent Mode Failure”，导致临时启用Serial Old收集器来重新进行老年代的垃圾收集，停顿时间会更长

## 优点
* 并发收集，低停顿




